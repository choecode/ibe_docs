{
  "code": 200,
  "msg": "处理成功！",
  "data": {
    "id": "17279182260142201",
    "apiCode": "E69",
    "apiNameEn": "AirTicketConfirmAutoRefundOrder",
    "apiNameCn": "自动退票（订单）",
    "introduce": "本接口实现了国内/国际客票自动退票的功能，以方便代理人客户使用，基于领达合作模式解决方案，接口追加订单逻辑满足合作模式场景业务需要。\r\n   自动计算退票费接口实现了黑屏TRFD:Z指令功能，支持代理人在线自动计算退票费，以方便代理人客户使用。",
    "business": "对所退的机票必须满足以下条件：\r\n该票在出票前是使用国内运价自动计算指令（PATA）或国际运价自动计算指令（QTE+DFSQ:A）来计算所订航段的运价；\r\n国内票采用自动方式退票时，系统会校验PNR是否删除SSR TKNE项或XE PNR，否则会在报错提示先退座，无法进行后续操作，代理人需要先进行退座处理之后才能继续自动退票的流程，国际票自动退不校验；\r\n自动退票支持退票面所有未飞航段（包括联票），不支持指定航段退票。\r\n对所退的机票必须满足以下条件：\r\n该票在出票前是使用国内运价自动计算指令（PATA）或国际运价自动计算指令（QTE+DFSQ:A）来计算所订航段的运价；\r\n国内票采用自动方式退票时，系统会校验PNR是否删除SSR TKNE项或XE PNR，否则会在报错提示先退座，无法进行后续操作，代理人需要先进行退座处理之后才能继续自动退票的流程，国际票自动退不校验；\r\n自动退票支持退票面所有未飞航段（包括联票），不支持指定航段退票。",
    "functions": "通过E46-自动计算退票费（AIG）接口获取退票费用，确认退票后，调用本接口，完成自动退票并自动修改票面状态open to refunded。\r\n自动退票\r\n如果代理人客户确认进行退票，可使用该功能完成退票单的提交并自动修改客票状态O2R，返回退票单号、和交易结果和订单号。自动退票完成后，建议代理人客户自行确认票面以及结算是否操作成功。\r\n自动计算退票费\r\n代理人客户在正式确认退票前，先使用该功能获取具体的退票费用信息，功能同黑屏TRFD:Z指令。",
    "requestSchema": "[{\"name\":\"TES_AirTicketConfirmAutoRefundOrderRQ\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"自动退票订单请求信息\",\"children\":[{\"name\":\"POS\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"Point Of Sale\",\"children\":[{\"name\":\"Source\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"请求者信息\",\"children\":[{\"name\":\"@PseudoCityCode\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"伪城市代码（Office代码：PKE099）\",\"children\":[],\"default\":\"\"}],\"default\":\"\"}],\"default\":\"\"},{\"name\":\"BookingReferenceID\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"预定信息\",\"children\":[{\"name\":\"@ID\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"预定标识号\",\"children\":[],\"default\":\"\"},{\"name\":\"@ID_Context\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"预定标识类型\",\"children\":[],\"default\":\"\"}],\"default\":\"\"},{\"name\":\"TicketRefundDetailInfo\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"\",\"children\":[{\"name\":\"PrintDeviceNo\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"打票机号\",\"children\":[],\"default\":\"\"},{\"name\":\"TicketNumber\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"客票号\",\"children\":[],\"default\":\"\"}],\"default\":\"\"}],\"default\":\"\"}]",
    "responseSchema": "[{\"name\":\"TES_AirTicketConfirmAutoRefundOrderRS\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"自动退票订单响应信息\",\"children\":[{\"name\":\"Warnings\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"警告信息集合\",\"children\":[{\"name\":\"Warning\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"警告信息\",\"children\":[{\"name\":\"Trace\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"错误详细描述或者内部异常信息\",\"children\":[{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"编码\",\"children\":[],\"default\":\"\"},{\"name\":\"@Text\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"文本\",\"children\":[],\"default\":\"\"}],\"default\":\"\"},{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"警告代码(数字)\",\"children\":[],\"default\":\"\"},{\"name\":\"@Type\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"警告类型\",\"children\":[],\"default\":\"\"},{\"name\":\"@ShortText\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"警告描述信息(英文)\",\"children\":[],\"default\":\"\"},{\"name\":\"@ShortTextZH\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"警告描述信息(中文)\",\"children\":[],\"default\":\"\"}],\"default\":\"\"}],\"default\":\"\"},{\"name\":\"Errors\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"错误信息集合\",\"children\":[{\"name\":\"Error\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"错误信息\",\"children\":[{\"name\":\"Trace\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"错误详细描述或者内部异常信息\",\"children\":[{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"编码\",\"children\":[],\"default\":\"\"},{\"name\":\"@Text\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"文本\",\"children\":[],\"default\":\"\"}],\"default\":\"\"},{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"错误代码（数字）\",\"children\":[],\"default\":\"\"},{\"name\":\"@Type\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"错误类型\",\"children\":[],\"default\":\"\"},{\"name\":\"@ShortText\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"错误描述信息（英文）\",\"children\":[],\"default\":\"\"},{\"name\":\"@ShortTextZH\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"错误描述信息（中文）\",\"children\":[],\"default\":\"\"}],\"default\":\"\"}],\"default\":\"\"},{\"name\":\"RefundFormNumber\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"退票单号\",\"children\":[],\"default\":\"\"},{\"name\":\"OrderId\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"订单号\",\"children\":[],\"default\":\"\"},{\"name\":\"EtTxnResult\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"自动退票返回结果\",\"children\":[],\"default\":\"\"}],\"default\":\"\"},{\"name\":\"Errors\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"错误信息集合\",\"children\":[{\"name\":\"Error\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"错误信息\",\"children\":[{\"name\":\"Trace\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"错误详细描述或者内部异常信息\",\"children\":[{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"编码\",\"children\":[],\"default\":\"\"},{\"name\":\"@Text\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"文本\",\"children\":[],\"default\":\"\"}],\"default\":\"\"},{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"错误代码（数字）\",\"children\":[],\"default\":\"\"},{\"name\":\"@Type\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"错误类型\",\"children\":[],\"default\":\"\"},{\"name\":\"@ShortText\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"错误描述信息（英文）\",\"children\":[],\"default\":\"\"},{\"name\":\"@ShortTextZH\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"错误描述信息（中文）\",\"children\":[],\"default\":\"\"}],\"default\":\"\"}],\"default\":\"\"}]",
    "errorCodes": "[{\"code\":\" 403 \",\"name\":null,\"msg\":null,\"msgZh\":\" 用户名、密码、IP错误或无权限 \"},{\"code\":\" -303 \",\"name\":null,\"msg\":\" inner service error \",\"msgZh\":\" 内部服务异常 \"},{\"code\":\" -304 \",\"name\":null,\"msg\":\" sending commands too fast, try again later \",\"msgZh\":\" 访问速度过快,请稍后再试 \"},{\"code\":\" -305 \",\"name\":null,\"msg\":\" transaction times limited \",\"msgZh\":\" 访问次数限制 \"},{\"code\":\" -301 \",\"name\":null,\"msg\":\" office permission denied \",\"msgZh\":\" Office 没有权限 \"},{\"code\":\" -390 \",\"name\":null,\"msg\":\" IBE Service Error \",\"msgZh\":\" IBE服务异常 \"},{\"code\":\" -311 \",\"name\":null,\"msg\":\" time out, please try again later \",\"msgZh\":\" 操作超时，请稍后再试 \"},{\"code\":\" -306 \",\"name\":null,\"msg\":\" too many concurrent request for service \",\"msgZh\":\" 访问频率限制 \"},{\"code\":\" -1 \",\"name\":null,\"msg\":\" Biz Error \",\"msgZh\":\" 业务异常 \"},{\"code\":\" -400 \",\"name\":null,\"msg\":\" format of xml string is not valid \",\"msgZh\":\" xml内容格式错误 \"},{\"code\":\" -402 \",\"name\":null,\"msg\":\" Input error! \",\"msgZh\":\" 输入参数出错 \"}]",
    "createTime": "2025-07-10T17:25:12.387+08:00",
    "createUser": "jiangdequan",
    "updateTime": "2025-09-04T13:44:07.801+08:00",
    "updateUser": null,
    "qaApiDemos": [
      {
        "id": "22338703677457253",
        "apiDocId": 17279182260142201,
        "seqNumber": 1,
        "demoDesc": "自动退票(订单).xml",
        "request": "<TES_AirTicketConfirmAutoRefundRQ>\r\n    <POS>\r\n        <Source PseudoCityCode=\"TYN202\"/>\r\n    </POS>\r\n    <BookingReferenceID ID=\"2401121553464fc4e63\" ID_Context=\"ORDER\"/>\r\n    <TicketRefundDetailInfo>\r\n        <PrintDeviceNo>99</PrintDeviceNo>\r\n        <TicketNumber>999-1340001253</TicketNumber>\r\n    </TicketRefundDetailInfo>\r\n</TES_AirTicketConfirmAutoRefundRQ>",
        "response": null,
        "createTime": "2025-09-04T13:44:08.015+08:00",
        "createUser": "jiangdequan",
        "updateTime": null,
        "updateUser": null
      }
    ],
    "url": "/xml/AirTicketConfirmAutoRefundOrder"
  }
}