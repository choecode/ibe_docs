{
  "code": 200,
  "msg": "处理成功！",
  "data": {
    "id": "17278750102127044",
    "apiCode": "D34",
    "apiNameEn": "AirPNROfficePushListQuery",
    "apiNameCn": "OFFICE授权PNR列表查询",
    "introduce": "查询指定OFFICE的PNR有效授权/被授权情况列表 \r\n2.版本\r\n主要内容\u0007\nOFFICE授权PNR列表查询\u0007\n参考文档\u0007\n创建部门\u0007\n批准单\u0007\n版本号：\u0007\n批准人\u0007\n批准人签字\u0007\n批准日期\u0007\n文档控制",
    "business": "查询指定OFFICE的PNR有效授权/被授权情况列表",
    "functions": "1、查询指定OFFICE有效授权PNR情况列表 \r\n2、查询指定OFFICE有效被授权的PNR情况列表 \r\n3、列表结果含授权/被授权时间 \r\n4、列表结果含授权/被授权的权限（读/写） \r\n5、支持指定目标OFFICE（授权/被授权）查询 \r\n6、支持指定目标OFFICE（授权/被授权）及目标时间范围的查询 \r\n5.接口说明\r\n5.1请求参数说明\r\n| 元素名称  | 说明  | Rep | 类型 | 默认值 | 备注 |\n\r| TES_AirPNROfficePushListQueryRQ |  | 1 |  |  |  |\n\r|  POS | 零售商信息 | 1 |  |  |  |\n\r|  Source |  |  |  |  |  |\n\r|  @PseudoCityCode | 伪城市代码（Office代码） | 1 | String |  | 如：PEK099 |\n\r| PNROfficePushListQuery |  | 1 |  |  |  |\n\r| ApprovalOfficeId | 授权office | 0..1 | String |  |  |\n\r| AuthorizedOfficeId | 被授权office | 0..1 | String |  |  |\n\r|  OperationDate | 操作日期 | 0..1 | String |  | YYYY-MM-DD |\n\r|  Option | 操作类型 | 0..1 | String |  | A或B：A表示查询指定office授权的PNR列表；B表示查询指定OFFICE被授权的PNR列表  |\n5.2响应参数说明\r\n| 元素名称  | 说明 | Rep | 类型 | 默认值 | 备注 |\n\r| TES_AirPNROfficePushListQueryRS |  | 1 |  |  |  |\n\r|  Errors | 错误信息 | 0..1 |  |  |  |\n\r|  Error |  | 0..1 |  |  |  |\n\r|  @Code | 错误代码 | 0..1 | String |  |  |\n\r|  @Type | 错误类型 | 0..1 | String |  |  |\n\r|  @ShortText | 错误详细信息 | 0..1 | String |  |  |\n\r|  Warnings | 警告信息 | 0..1 |  |  |  |\n\r|  Warning |  | 0..1 |  |  |  |\n\r|  @Code | 警告代码 | 0..1 | String |  |  |\n\r|  @Type | 警告类型 | 0..1 | String |  |  |\n\r|  @ShortText | 警告详细信息 | 0..1 | String |  |  |\n\r|  Response  |  | 0..1 | String |  |  |\n\r| Result |  | 0..1 |  |  |  |\n\r| RetrieveCode | 返回码 | 0..1 | String |  |  |\n\r|  RetrieveStatus | 返回状态 | 0..1 | String |  | 如：SUCCESS |\n\r|  AuthorityInfo |  | 0..1 | List |  |  |\n\r| ApprovalofficeId | 授权Office | 0..1 | String |  |  |\n\r| AuthorizationTypeCode | 被授权的权限 | 0..1 | String |  |  |\n\r| AuthorizedofficeId | 被授权office | 0..1 | String |  |  |\n\r| OperationDate | 被授权日期 | 0..1 | String |  |  |\n\r| CrsPnrLocator | PNR号 | 0..1 | String |  |  |\n\r| OperationTime | 被授权时间 | 0..1 | String |  |  |\n6.错误说明\r\n6.1 http协议错误\r\n由于接口为HTTP接口，HTTP协议会返回403错误：\r\n| http错误代码 | 说明 |\n\r| 403 | 用户名、密码、IP错误或无权限 |\n\r|  |  |\n6.2接口错误\r\n<Errors>节点记录了错误信息。错误信息分为两类：业务错误、系统错误。详细见下表：\r\n系统错误\r\n| 错误代码 | 错误描述 | 说明 |\n\r| -303 | inner service error | 内部服务异常 |\n\r| -304 | sending commands too fast, try again later | 访问速度过快,请稍后再试 |\n\r| -305 | transaction times limited | 访问次数限制 |\n\r| -301 | office permission denied | Office 没有权限 |\n\r| -390 | IBE Service Error | IBE服务异常 |\n\r| -311 | time out, please try again later | 操作超时，请稍后再试 |\n\r| -306 | too many concurrent request for service | 访问频率限制 |\n业务错误\r\n| 错误代码 | 错误描述 | 说明 |\n\r| -1 | Biz Error | 业务异常 |\n\r| -400 | format of xml string is not valid | xml内容格式错误 |\n\r| -402 | Input error! | 输入参数出错 |\n7.参考样例\r\n7.1 查询\r\n输入样例：\r\n <?xml version=\"1.0\" encoding=\"UTF-8\"?>\u000b<TES_AirPNROfficePushListQueryRQ>\u000b    <POS>\u000b        <!-- Office号 -->\u000b        <Source PseudoCityCode=\"SHA384\" />\u000b    </POS>\u000b    <PNROfficePushListQuery>\u000b        <ApprovalOfficeId>SHA717</ApprovalOfficeId>\u000b        <AuthorizedOfficeId>SHA384</AuthorizedOfficeId>\u000b        <OperationDate>2024</OperationDate>\u000b        <Option>A</Option>\u000b    </PNROfficePushListQuery>\u000b</TES_AirPNROfficePushListQueryRQ>\r\n输出样例：\r\n<TES_AirPNROfficePushListQueryRS>\u000b   <Result>\u000b       <retrieveCode>OR-4904-19</retrieveCode>\u000b       <retrieveStatus>SUCCESS</retrieveStatus>\u000b       <AuthorityInfo>\u000b           <ApprovalOfficeId>CAN826</ApprovalOfficeId>\u000b           <AuthorizationTypeCode>R</AuthorizationTypeCode>\u000b           <AuthorizedOfficeId>BJS187</AuthorizedOfficeId>\u000b           <OperationDate>2025-01-08</OperationDate>\u000b           <CrsPnrLocator>HNWW1D</CrsPnrLocator>\u000b           <OperationTime>11:28</OperationTime>\u000b       </AuthorityInfo>\u000b   </Result>\u000b</TES_AirPNROfficePushListQueryRS>\r\n 8.接口调用\r\n    OFFICE授权PNR列表查询提供基于XML文档规范的标准HTTP协议接口，通过在标准HTTP通道上传输XML格式的请求和数据来完成服务调用。服务的输入输出定义在标准的XSD文档中，用户根据自有系统的实现环境结合XSD文档进行数据到对象间的转换。在线分销平台提供服务接口URL,用户使用HTTP协议按照服务定义正确构造请求输入，正确解析数据输出实现服务的调用。\r\n8.1接口申请\r\n    请与您所在城市的中国航信分支机构联系，资质审查通过后签署试用协议，即可获得试用接口。\r\n8.2接口认证\r\n授权用户调用试用接口时需要使用已分配的账号和密码、并使用申请时的IP。如果已变化IP请联系业务人员申请变更IP。\r\n8.3接口地址\r\n接口试用地址：\u0013 HYPERLINK \"http://espeed.travelsky.com/develop/xml/AirFareFlightShop/I\" \u0014https://linkstar.travelsky.com.cn/develop/xml/\u0015AirPNROfficePushListQuery\r\n8.4 HTTP请求参数说明\r\n|  参数名称  | 说明 | 类型 | 备注 |\n\r|  EchoToken | 用户可根据需要在请求HTTP Header中传入该参数，标识本次请求，便于排查问题 | String | 格式：[a-zA-Z0-9]{0,128}， 使用方式详见调用样例 |\n8.5 HTTP响应参数说明\r\n|  参数名称  | 说明 | 类型 | 备注 |\n\r| CorrelationID | 本次接口调用唯一标识（接口内保证唯一）。问题排查需要提供该字符串，可以快速定位问题。用户可根据需要获取该字段。 | String | 格式：[a-zA-Z0-9]{0,32} 使用方式详见调用样例 |\n\r|  TimeStamp | 接口接收到请求时间 | Date | 格式： 2016-10-17T14:45:34.234+0800 使用方式详见调用样例 |\n\r|  EchoToken | 传入值与返回值一致，如传入：abcd1234，返回abcd1234 | String | 格式：[a-zA-Z0-9]{0,128} 使用方式详见调用样例 |\n8.6调用示例\r\n下载地址：\r\nhttps://linkstar.travelsky.com.cn/ezaccess/download/callSample",
    "requestSchema": "[{\"name\":\"TES_AirPNROfficePushListQueryRQ\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"预定信息验证请求信息\",\"children\":[{\"name\":\"POS\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"Point Of Sale\",\"children\":[{\"name\":\"Source\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"请求者信息\",\"children\":[{\"name\":\"@PseudoCityCode\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"伪城市代码（Office代码：PKE099）\",\"children\":[],\"default\":\"\"}],\"default\":\"\"}],\"default\":\"\"},{\"name\":\"PNROfficePushListQuery\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"\",\"children\":[{\"name\":\"ApprovalOfficeId\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"\",\"children\":[],\"default\":\"\"},{\"name\":\"AuthorizedOfficeId\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"\",\"children\":[],\"default\":\"\"},{\"name\":\"OperationDate\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"\",\"children\":[],\"default\":\"\"},{\"name\":\"Option\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"\",\"children\":[],\"default\":\"\"}],\"default\":\"\"}],\"default\":\"\"}]",
    "responseSchema": "[{\"name\":\"TES_AirPNROfficePushListQueryRS\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"\",\"children\":[{\"name\":\"Warnings\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"警告信息集合\",\"children\":[{\"name\":\"Warning\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"警告信息\",\"children\":[{\"name\":\"Trace\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"错误详细描述或者内部异常信息\",\"children\":[{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"编码\",\"children\":[],\"default\":\"\"},{\"name\":\"@Text\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"文本\",\"children\":[],\"default\":\"\"}],\"default\":\"\"},{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"警告代码(数字)\",\"children\":[],\"default\":\"\"},{\"name\":\"@Type\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"警告类型\",\"children\":[],\"default\":\"\"},{\"name\":\"@ShortText\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"警告描述信息(英文)\",\"children\":[],\"default\":\"\"},{\"name\":\"@ShortTextZH\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"警告描述信息(中文)\",\"children\":[],\"default\":\"\"}],\"default\":\"\"}],\"default\":\"\"},{\"name\":\"Errors\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"错误信息集合\",\"children\":[{\"name\":\"Error\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"错误信息\",\"children\":[{\"name\":\"Trace\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"错误详细描述或者内部异常信息\",\"children\":[{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"编码\",\"children\":[],\"default\":\"\"},{\"name\":\"@Text\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"文本\",\"children\":[],\"default\":\"\"}],\"default\":\"\"},{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"错误代码（数字）\",\"children\":[],\"default\":\"\"},{\"name\":\"@Type\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"错误类型\",\"children\":[],\"default\":\"\"},{\"name\":\"@ShortText\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"错误描述信息（英文）\",\"children\":[],\"default\":\"\"},{\"name\":\"@ShortTextZH\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"错误描述信息（中文）\",\"children\":[],\"default\":\"\"}],\"default\":\"\"}],\"default\":\"\"},{\"name\":\"Result\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"\",\"children\":[{\"name\":\"retrieveCode\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"\",\"children\":[],\"default\":\"\"},{\"name\":\"retrieveStatus\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"\",\"children\":[],\"default\":\"\"},{\"name\":\"AuthorityInfo\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"\",\"children\":[{\"name\":\"ApprovalOfficeId\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"\",\"children\":[],\"default\":\"\"},{\"name\":\"AuthorizationTypeCode\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"\",\"children\":[],\"default\":\"\"},{\"name\":\"AuthorizedOfficeId\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"\",\"children\":[],\"default\":\"\"},{\"name\":\"OperationDate\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"\",\"children\":[],\"default\":\"\"},{\"name\":\"CrsPnrLocator\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"\",\"children\":[],\"default\":\"\"},{\"name\":\"OperationTime\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"\",\"children\":[],\"default\":\"\"}],\"default\":\"\"}],\"default\":\"\"}],\"default\":\"\"},{\"name\":\"Errors\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"错误信息集合\",\"children\":[{\"name\":\"Error\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"错误信息\",\"children\":[{\"name\":\"Trace\",\"type\":\"array\",\"quantity\":\"0..n\",\"description\":\"错误详细描述或者内部异常信息\",\"children\":[{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"编码\",\"children\":[],\"default\":\"\"},{\"name\":\"@Text\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"文本\",\"children\":[],\"default\":\"\"}],\"default\":\"\"},{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"错误代码（数字）\",\"children\":[],\"default\":\"\"},{\"name\":\"@Type\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"错误类型\",\"children\":[],\"default\":\"\"},{\"name\":\"@ShortText\",\"type\":\"string\",\"quantity\":\"1\",\"description\":\"错误描述信息（英文）\",\"children\":[],\"default\":\"\"},{\"name\":\"@ShortTextZH\",\"type\":\"object\",\"quantity\":\"1\",\"description\":\"错误描述信息（中文）\",\"children\":[],\"default\":\"\"}],\"default\":\"\"}],\"default\":\"\"}]",
    "errorCodes": "[]",
    "createTime": "2025-07-10T17:18:20.254+08:00",
    "createUser": "jiangdequan",
    "updateTime": "2025-09-03T16:30:43.216+08:00",
    "updateUser": null,
    "qaApiDemos": [
      {
        "id": "22258587628733068",
        "apiDocId": 17278750102127044,
        "seqNumber": 1,
        "demoDesc": "OFFICE授权PNR列表查询.xml",
        "request": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<TES_AirPNROfficePushListQueryRQ>\r\n    <POS>\r\n        <!-- Office号 -->\r\n        <Source PseudoCityCode=\"SHA384\" />\r\n    </POS>\r\n    <PNROfficePushListQuery>\r\n        <ApprovalOfficeId>SHA717</ApprovalOfficeId>\r\n        <AuthorizedOfficeId>SHA384</AuthorizedOfficeId>\r\n        <OperationDate>2024</OperationDate>\r\n        <Option>A</Option>\r\n    </PNROfficePushListQuery>\r\n</TES_AirPNROfficePushListQueryRQ>",
        "response": null,
        "createTime": "2025-09-03T16:30:43.381+08:00",
        "createUser": "jiangdequan",
        "updateTime": null,
        "updateUser": null
      }
    ],
    "url": "/xml/AirPNROfficePushListQuery"
  }
}