{
  "code": 200,
  "msg": "处理成功！",
  "data": {
    "id": "17278740226638637",
    "apiCode": "D17",
    "apiNameEn": "AirAgentBookList",
    "apiNameCn": "提取预定记录（AIG）",
    "introduce": "提取预订记录接口实现了黑屏AB指令功能，支持代理人提取本office预订的所有预订记录，获取相关预订信息。",
    "business": "代理人可使用本接口提取本office预订的所有预订记录。",
    "functions": "1、支持按起飞日期/城市对/舱位/航空公司代码提取订座记录\r\n2、支持提取航段状态为HK或RR的所有记录\r\n3、支持提取航段状态为RR的所有记录\r\n4、支持提取航段状态为HL或HN等的所有记录\r\n5、支持提取团队记录\r\n6、支持提取已删除的所有记录\r\n7、支持按姓名提取记录",
    "requestSchema": "[{\"name\":\"TES_AirAgentBookListRQ\",\"type\":\"object\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"提取预订信息请求\",\"children\":[{\"name\":\"POS\",\"type\":\"object\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"Point Of Sale\",\"children\":[{\"name\":\"Source\",\"type\":\"object\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"请求者信息\",\"children\":[{\"name\":\"@PseudoCityCode\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"伪城市代码（Office代码：PKE099）\",\"children\":[]}]}]},{\"name\":\"AgentBookListDetailInfo\",\"type\":\"object\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"\",\"children\":[{\"name\":\"DepartureDateTime\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"日期格式yyyyMMdd\",\"children\":[]},{\"name\":\"CabinType\",\"type\":\"string\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"舱位号\",\"children\":[]},{\"name\":\"FlightNumber\",\"type\":\"string\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"航班号\",\"children\":[]},{\"name\":\"PassengerName\",\"type\":\"string\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"旅客姓名\",\"children\":[]},{\"name\":\"Option\",\"type\":\"string\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"选项,选项，B: 显示 HK 和 RR；\\n                            R: 只显示 RR；X: 显示 HX, XX, XL, UN, UC, NO, DL, IX；\\n                            U: 显示 HL, US, UU ,HN；Y:\\n                            显示 SA, ID, NR；G: 显示团\\n                            队 PNR\",\"children\":[]},{\"name\":\"AirlineCode\",\"type\":\"string\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"航空公司代码\",\"children\":[]},{\"name\":\"Segment\",\"type\":\"string\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"航段信息\",\"children\":[]}]}]}]",
    "responseSchema": "[{\"name\":\"TES_AirAgentBookListRS\",\"type\":\"object\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"提取预订记录返回\",\"children\":[{\"name\":\"Warnings\",\"type\":\"array\",\"quantity\":\"0..n\",\"default\":\"\",\"description\":\"警告信息集合\",\"children\":[{\"name\":\"Warning\",\"type\":\"array\",\"quantity\":\"0..n\",\"default\":\"\",\"description\":\"警告信息\",\"children\":[{\"name\":\"Trace\",\"type\":\"array\",\"quantity\":\"0..n\",\"default\":\"\",\"description\":\"错误详细描述或者内部异常信息\",\"children\":[{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"编码\",\"children\":[]},{\"name\":\"@Text\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"文本\",\"children\":[]}]},{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"警告代码(数字)\",\"children\":[]},{\"name\":\"@Type\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"警告类型\",\"children\":[]},{\"name\":\"@ShortText\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"警告描述信息(英文)\",\"children\":[]},{\"name\":\"@ShortTextZH\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"警告描述信息(中文)\",\"children\":[]}]}]},{\"name\":\"Errors\",\"type\":\"array\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"错误信息集合\",\"children\":[{\"name\":\"Error\",\"type\":\"array\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"错误信息\",\"children\":[{\"name\":\"Trace\",\"type\":\"array\",\"quantity\":\"0..n\",\"default\":\"\",\"description\":\"错误详细描述或者内部异常信息\",\"children\":[{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"编码\",\"children\":[]},{\"name\":\"@Text\",\"type\":\"string\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"文本\",\"children\":[]}]},{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"错误代码（数字）\",\"children\":[]},{\"name\":\"@Type\",\"type\":\"string\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"错误类型\",\"children\":[]},{\"name\":\"@ShortText\",\"type\":\"string\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"错误描述信息（英文）\",\"children\":[]},{\"name\":\"@ShortTextZH\",\"type\":\"string\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"错误描述信息（中文）\",\"children\":[]}]}]},{\"name\":\"DepartureDateTime\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"日期格式yyyyMMdd\",\"children\":[]},{\"name\":\"TotalNumber\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"记录总数\",\"children\":[]},{\"name\":\"Airline\",\"type\":\"object\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"航空公司信息\",\"children\":[{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"航空公司代码\",\"children\":[]}]},{\"name\":\"FlightNumber\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"航班号\",\"children\":[]},{\"name\":\"BookingClassAvail\",\"type\":\"object\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"舱位信息\",\"children\":[{\"name\":\"@ResBookDesigCode\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"舱位号\",\"children\":[]}]},{\"name\":\"Segment\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"航段信息\",\"children\":[]},{\"name\":\"FlightSegments\",\"type\":\"object\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"航段信息列表\",\"children\":[{\"name\":\"FlightSegment\",\"type\":\"array\",\"quantity\":\"1..n\",\"default\":\"\",\"description\":\"航段信息\",\"children\":[{\"name\":\"TotalSegmentNumber\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"航段总数\",\"children\":[]},{\"name\":\"Segment\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"航段信息\",\"children\":[]},{\"name\":\"AirTravelerInfo\",\"type\":\"object\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"旅客信息列表\",\"children\":[{\"name\":\"AirTraveler\",\"type\":\"array\",\"quantity\":\"1..n\",\"default\":\"\",\"description\":\"旅客信息\",\"children\":[{\"name\":\"GroupCount\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"同性人数\",\"children\":[]},{\"name\":\"PassengerName\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"旅客姓名\",\"children\":[]},{\"name\":\"TravelRefNumber\",\"type\":\"object\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"记录编号\",\"children\":[{\"name\":\"@RPH\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"记录编号\",\"children\":[]}]},{\"name\":\"MismatchingIndicator\",\"type\":\"string\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"不匹配标识\",\"children\":[]},{\"name\":\"GroupFlag\",\"type\":\"string\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"旅客标识\",\"children\":[]},{\"name\":\"Index\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"旅客单序号\",\"children\":[]},{\"name\":\"BookingClassAvail\",\"type\":\"object\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"舱位信息\",\"children\":[{\"name\":\"@ResBookDesigCode\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"舱位号\",\"children\":[]}]},{\"name\":\"ActionCode\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"PNR航段状态\",\"children\":[]},{\"name\":\"SeatCount\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"PNR中人数\",\"children\":[]},{\"name\":\"Office\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"office\",\"children\":[]},{\"name\":\"Airline\",\"type\":\"object\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"航空公司信息\",\"children\":[{\"name\":\"@Code\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"航空公司代码\",\"children\":[]}]},{\"name\":\"SeatDate\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"订座日期,格式yyyyMMdd\",\"children\":[]},{\"name\":\"FlightNumber\",\"type\":\"string\",\"quantity\":\"1\",\"default\":\"\",\"description\":\"航班号\",\"children\":[]},{\"name\":\"FlightSuffix\",\"type\":\"string\",\"quantity\":\"0..1\",\"default\":\"\",\"description\":\"航班号后缀\",\"children\":[]}]}]}]}]}]}]",
    "errorCodes": "[{\"code\":\" 403 \",\"name\":null,\"msg\":null,\"msgZh\":\" 用户名、密码、IP错误或无权限 \"},{\"code\":\" -303 \",\"name\":null,\"msg\":\" inner service error \",\"msgZh\":\" 内部服务异常 \"},{\"code\":\" -304 \",\"name\":null,\"msg\":\" sending commands too fast, try again later \",\"msgZh\":\" 访问速度过快,请稍后再试 \"},{\"code\":\" -305 \",\"name\":null,\"msg\":\" transaction times limited \",\"msgZh\":\" 访问次数限制 \"},{\"code\":\" -301 \",\"name\":null,\"msg\":\" office permission denied \",\"msgZh\":\" Office 没有权限 \"},{\"code\":\" -390 \",\"name\":null,\"msg\":\" IBE Service Error \",\"msgZh\":\" IBE服务异常 \"},{\"code\":\" -311 \",\"name\":null,\"msg\":\" time out, please try again later \",\"msgZh\":\" 操作超时，请稍后再试 \"},{\"code\":\" -306 \",\"name\":null,\"msg\":\" too many concurrent request for service \",\"msgZh\":\" 访问频率限制 \"},{\"code\":\" -1 \",\"name\":null,\"msg\":\" Biz Error \",\"msgZh\":\" 业务异常 \"},{\"code\":\" -400 \",\"name\":null,\"msg\":\" format of xml string is not valid \",\"msgZh\":\" xml内容格式错误 \"},{\"code\":\" -402 \",\"name\":null,\"msg\":\" Input error! \",\"msgZh\":\" 输入参数出错 \"}]",
    "createTime": "2025-07-10T17:18:10.000+08:00",
    "createUser": "jiangdequan",
    "updateTime": "2025-11-26T15:27:24.000+08:00",
    "updateUser": "ylzhu",
    "qaApiDemos": [
      {
        "id": "22338650255655664",
        "apiDocId": 17278740226638637,
        "seqNumber": 1,
        "demoDesc": "提取预订记录Rq.xml",
        "request": "<TES_AirAgentBookListRQ>\r\n    <POS>\r\n        <!-- office号,属性PseudoCityCode存值 -->\r\n        <Source PseudoCityCode=\"BJS191\"/>\r\n    </POS>\r\n    <AgentBookListDetailInfo>\r\n        <!-- 日期 -->\r\n        <DepartureDateTime>20220528</DepartureDateTime>\r\n        <!-- 舱位 -->\r\n        <CabinType>Y</CabinType>\r\n        <!-- 航班号 -->\r\n        <FlightNumber>746</FlightNumber>\r\n        <!-- 旅客姓名 -->\r\n        <PassengerName>TEST/TEST</PassengerName>\r\n        <!-- 选项,B显示HK和RR -->\r\n        <Option>B</Option>\r\n        <!-- 航空公司代码,属性Code存值 -->\r\n        <AirlineCode>OZ</AirlineCode>\r\n        <!-- 航段 -->\r\n        <Segment>HKGICN</Segment>\r\n    </AgentBookListDetailInfo>\r\n</TES_AirAgentBookListRQ>",
        "response": "<TES_AirAgentBookListRS>\n    <DepartureDateTime>20220528</DepartureDateTime>\n    <TotalNumber>11</TotalNumber>\n    <Airline Code=\"OZ\"/>\n    <FlightNumber>746</FlightNumber>\n    <BookingClassAvail ResBookDesigCode=\"Y\"/>\n    <Segment>HKGICN</Segment>\n    <FlightSegments>\n        <FlightSegment>\n            <TotalSegmentNumber>11</TotalSegmentNumber>\n            <Segment>HKGICN</Segment>\n            <AirTravelerInfo>\n                <AirTraveler>\n                    <GroupCount>1</GroupCount>\n                    <PassengerName>TEST/TEST</PassengerName>\n                    <TravelRefNumber RPH=\"JPX8RE\"/>\n                    <Index>001</Index>\n                    <BookingClassAvail ResBookDesigCode=\"Y\"/>\n                    <ActionCode>HK</ActionCode>\n                    <SeatCount>1</SeatCount>\n                    <Office>BJS191</Office>\n                    <Airline Code=\"OZ\"/>\n                    <SeatDate>20220318</SeatDate>\n                    <FlightNumber>746</FlightNumber>\n                </AirTraveler>\n                <AirTraveler>\n                    <GroupCount>1</GroupCount>\n                    <PassengerName>TEST/TEST</PassengerName>\n                    <TravelRefNumber RPH=\"JPX8RF\"/>\n                    <Index>002</Index>\n                    <BookingClassAvail ResBookDesigCode=\"Y\"/>\n                    <ActionCode>HK</ActionCode>\n                    <SeatCount>1</SeatCount>\n                    <Office>BJS191</Office>\n                    <Airline Code=\"OZ\"/>\n                    <SeatDate>20220318</SeatDate>\n                    <FlightNumber>746</FlightNumber>\n                </AirTraveler>\n                <AirTraveler>\n                    <GroupCount>1</GroupCount>\n                    <PassengerName>TEST/CHILD CHD</PassengerName>\n                    <TravelRefNumber RPH=\"JPX8RG\"/>\n                    <Index>003</Index>\n                    <BookingClassAvail ResBookDesigCode=\"Y\"/>\n                    <ActionCode>HK</ActionCode>\n                    <SeatCount>1</SeatCount>\n                    <Office>BJS191</Office>\n                    <Airline Code=\"OZ\"/>\n                    <SeatDate>20220318</SeatDate>\n                    <FlightNumber>746</FlightNumber>\n                </AirTraveler>\n                <AirTraveler>\n                    <GroupCount>1</GroupCount>\n                    <PassengerName>TEST/CHILD CHD</PassengerName>\n                    <TravelRefNumber RPH=\"HM5DSP\"/>\n                    <Index>004</Index>\n                    <BookingClassAvail ResBookDesigCode=\"Y\"/>\n                    <ActionCode>HK</ActionCode>\n                    <SeatCount>2</SeatCount>\n                    <Office>BJS191</Office>\n                    <Airline Code=\"OZ\"/>\n                    <SeatDate>20220318</SeatDate>\n                    <FlightNumber>746</FlightNumber>\n                </AirTraveler>\n                <AirTraveler>\n                    <GroupCount>1</GroupCount>\n                    <PassengerName>TEST/TEST</PassengerName>\n                    <TravelRefNumber RPH=\"HM5DSP\"/>\n                    <Index>005</Index>\n                    <BookingClassAvail ResBookDesigCode=\"Y\"/>\n                    <ActionCode>HK</ActionCode>\n                    <SeatCount>2</SeatCount>\n                    <Office>BJS191</Office>\n                    <Airline Code=\"OZ\"/>\n                    <SeatDate>20220318</SeatDate>\n                    <FlightNumber>746</FlightNumber>\n                </AirTraveler>\n                <AirTraveler>\n                    <GroupCount>1</GroupCount>\n                    <PassengerName>TEST/CHILD CHD</PassengerName>\n                    <TravelRefNumber RPH=\"HF1W27\"/>\n                    <Index>006</Index>\n                    <BookingClassAvail ResBookDesigCode=\"Y\"/>\n                    <ActionCode>HK</ActionCode>\n                    <SeatCount>2</SeatCount>\n                    <Office>BJS191</Office>\n                    <Airline Code=\"OZ\"/>\n                    <SeatDate>20220328</SeatDate>\n                    <FlightNumber>746</FlightNumber>\n                </AirTraveler>\n                <AirTraveler>\n                    <GroupCount>1</GroupCount>\n                    <PassengerName>TEST/TEST</PassengerName>\n                    <TravelRefNumber RPH=\"HF1W27\"/>\n                    <Index>007</Index>\n                    <BookingClassAvail ResBookDesigCode=\"Y\"/>\n                    <ActionCode>HK</ActionCode>\n                    <SeatCount>2</SeatCount>\n                    <Office>BJS191</Office>\n                    <Airline Code=\"OZ\"/>\n                    <SeatDate>20220328</SeatDate>\n                    <FlightNumber>746</FlightNumber>\n                </AirTraveler>\n                <AirTraveler>\n                    <GroupCount>1</GroupCount>\n                    <PassengerName>TEST/CHILD CHD</PassengerName>\n                    <TravelRefNumber RPH=\"KP0D2P\"/>\n                    <Index>008</Index>\n                    <BookingClassAvail ResBookDesigCode=\"Y\"/>\n                    <ActionCode>HK</ActionCode>\n                    <SeatCount>2</SeatCount>\n                    <Office>BJS191</Office>\n                    <Airline Code=\"OZ\"/>\n                    <SeatDate>20220328</SeatDate>\n                    <FlightNumber>746</FlightNumber>\n                </AirTraveler>\n                <AirTraveler>\n                    <GroupCount>1</GroupCount>\n                    <PassengerName>TEST/TEST</PassengerName>\n                    <TravelRefNumber RPH=\"KP0D2P\"/>\n                    <Index>009</Index>\n                    <BookingClassAvail ResBookDesigCode=\"Y\"/>\n                    <ActionCode>HK</ActionCode>\n                    <SeatCount>2</SeatCount>\n                    <Office>BJS191</Office>\n                    <Airline Code=\"OZ\"/>\n                    <SeatDate>20220328</SeatDate>\n                    <FlightNumber>746</FlightNumber>\n                </AirTraveler>\n                <AirTraveler>\n                    <GroupCount>1</GroupCount>\n                    <PassengerName>TEST/CHILD CHD</PassengerName>\n                    <TravelRefNumber RPH=\"HF1W2Z\"/>\n                    <Index>010</Index>\n                    <BookingClassAvail ResBookDesigCode=\"Y\"/>\n                    <ActionCode>HK</ActionCode>\n                    <SeatCount>2</SeatCount>\n                    <Office>BJS191</Office>\n                    <Airline Code=\"OZ\"/>\n                    <SeatDate>20230401</SeatDate>\n                    <FlightNumber>746</FlightNumber>\n                </AirTraveler>\n                <AirTraveler>\n                    <GroupCount>1</GroupCount>\n                    <PassengerName>TEST/TEST</PassengerName>\n                    <TravelRefNumber RPH=\"HF1W2Z\"/>\n                    <Index>011</Index>\n                    <BookingClassAvail ResBookDesigCode=\"Y\"/>\n                    <ActionCode>HK</ActionCode>\n                    <SeatCount>2</SeatCount>\n                    <Office>BJS191</Office>\n                    <Airline Code=\"OZ\"/>\n                    <SeatDate>20230401</SeatDate>\n                    <FlightNumber>746</FlightNumber>\n                </AirTraveler>\n            </AirTravelerInfo>\n        </FlightSegment>\n    </FlightSegments>\n</TES_AirAgentBookListRS>",
        "createTime": "2025-09-04T13:43:17.000+08:00",
        "createUser": "jiangdequan",
        "updateTime": "2025-09-15T10:44:00.000+08:00",
        "updateUser": "ylzhu"
      }
    ],
    "url": "/xml/AirAgentBookList"
  }
}